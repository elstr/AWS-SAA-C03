

# Simple Storage Service (S3) - Part 2

Continuing from [Simple Storage Service (S3) - Part 1](./13-aws-s3-part1.md)

- Is private by default
- Access is given through resource policies
    - Identity policies
        - What can be accessed!
        - Attached to identities
        - Can only be assigned to identities in its' account
    - Resource policies
        - Who can access!
        - Attached to resources (Ex: S3)
        - Can reference identities from the same account & external accounts as well
        - Can also ALLOW/DENY anonymous principals
        - Use 'Principal' property in the policy document to define who can access this resource
        - `"Principal": "*"` - Every identity in this account, any identity from any external account, any anonymous identities
- There's limit of 5GB for a single PUT upload
- Supports Multipart upload
    - Minimum file size is 100MB
    - Maximum 10,000 multiparts
    - Size of one multipart must be between 5MB ~ 5GB
    - The last multipart can be lessthan 5MB
- Accelerated Transfer: Uses AWS Edge locations
    - 2 restrictions for enabling
        - Bucket name cannot contain periods (`.`) 
        - Bucket name should be DNS compatible
    - Creates a different type of S3 URLs
- "Block Public Access": Overrides what resource policy says, blocks the access to the public anonymous identities
- Static Site Hosting
    - `index` & `error` page is mandatory
    - To setup a custom domain, custom domain name & bucket name should match
- Object versioning
    - By default it is disabled
    - Once enabled, cannot disable again btu, can be Suspended
    - Object IDs are set to NULL when versioning is disabled
    - Delete Marker: Is a special marker in object version history added by AWS S3 to refer that object as a deleted object
    - Delete Marker can be deleted and doing so will bring back the last availble version of the object
    - All versions are billed
- MFA Delete: MFA is required to change bucket state, delete a version, it required a MFA
- Encryption
    - Buckets aren't encrypted, objects in the buckets are encrypted
    - 2 supporting methods (refering to encryption at rest, not in transit)
        - Client side encryption
        - Server side encryption
            - SSE - C (Using a customer provided key) - Not suitable if compute is taking toll
            - SSE - S3 (Using AWS S3 Managed key) - Not suitable if role seperation is handled
            - SSE - KMS (Suing a key managed by KMS) - Ideal when role seperation needed. Uses AES256 algorithm.
- Object Storage Classes
   - S3 Standard Class
       - Stored in at least 3 AZs
       - Object durability is '11 nines': 99.999,999,999% per year (1 object loss per 10, 000, 000 year)
       - Redundacy check using MD5 checksum
       - Cyclic Redundancy Check (CRC): To check & fix any data curruption
       - S3 responds with HTTP1.1 200 status, if a accessing object stored durably
       - Fees
           - Storing: $x per month, per GB
           - Transfering IN: Free
           - Transfering OUT: $x per GB
           - Requesting: $x per 1,000 requests
           - Retriewing: Free
           - Minimum duration charge: No
           - Minimum size charge: No
       - No minimum duration
       - No minimum size
       - Has a "milliseconds first byte latency"
       - Can make publicly available
       - Once configured, cannot be replaced by a different class
   - S3 Standard - Infrequent Access (IA) Class
        - Stored in at least 3 AZs
        - Object durability is '11 nines': 99.999,999,999% per year (1 object loss per 10, 000, 000 year)
        - Redundacy check using MD5 checksum
        - Cyclic Redundancy Check (CRC): To check & fix any data curruption
        - S3 responds with HTTP1.1 200 status, if a accessing object stored durably
        - Fees
            - Storing: Half of S3 Standard
            - Transfering IN: Free
            - Transfering OUT: Half of S3 Standard
            - Requesting: Half of S3 Standard
            - Retriewing: $x per GB
            - Minimum duration charge: $x for 30 days
            - Minimum size charge: $x for 128KB
        - No minimum duration
        - No minimum size
        - Has a "milliseconds first byte latency"
        - Can make publicly available
        - Ideal for:
            - Longed lived, important data
            - Infrequently accessed data
            - Don't use it for small files
            - Don't use it for temporary data
    - S3 One Zone Infrequent Access (IA) Class
        - s 
